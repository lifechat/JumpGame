<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>判断文本回车的数量</title>
</head>
<script>
    var bForbidden = false;
    var ch;
    var strForbidden = new Array("<", ">", "."); //罗列所有禁止的方法字符
    function chk(str) {
        for (var i = 0; i < strForbidden.length; i++) {
            for (var j = 0; j < str.length; j++) {
                ch = str.substr(j, 1);
                if (ch = strForbidden[i]) {
                    bForbidden = true;
                }
            }
        }
        if (bForbidden) {
            alert("包含特殊字符，已经被禁止")
        }
    }
    // function getCount() {
    //     var count = document.all("Textarea").innerHTML.split('\n').length - 1; //获得回车的个数
    //     alert("总共有" + count + "个回车")
    // }
    // 
    /*
     *  闭包是指有权访问另一个函数作用域中的变量的函数。
     *  能够读取其他函数内部变量的函数
     *
     *正常函数执行完毕后,里面声明的变量被垃圾回收处理掉,但是闭包可以让作用域里的变量,在函数执行完之后依旧保持没有被垃圾回收处理掉
     */
</script>

<body>
    <!-- <textarea id="Textarea" cols="30" rows="8"></textarea>
    <input type="button" id="Button1" value="获取" onclick="getCount()"> -->
    <input type="text" name="txt1" value="this is test !">
    <input type="button" value="测试文本" onclick="javascript:chk('txt1.value')">
</body>

</html>